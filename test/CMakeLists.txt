CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

ADD_SUBDIRECTORY(../../utils upnptestlibs)
GET_DIRECTORY_PROPERTY(UTILS_LIBRARIES  DIRECTORY ../../utils DEFINITION UTILS_LIBRARIES)

SET(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR})

INCLUDE_DIRECTORIES(
	${UPNPFRAMEWORK_INCLUDE_DIRS}
	${CMAKE_CURRENT_SOURCE_DIR}
)

ADD_EXECUTABLE(upnptest
	gmock-gtest-all.cc
	devicediscover.h
	main.cpp
    xmlutilstest.cpp
	#mediarenderertest.cpp
	#mediaservertest.cpp
	#controlpointtest.cpp
	testenvironment.h
)

LINK_DIRECTORIES(
	${UTILS_LIBRARY_DIRS}
    ${UPNPFRAMEWORK_LIBRARY_DIRS}
)

TARGET_LINK_LIBRARIES(upnptest
	-lpthread
	${UTILS_LIBRARIES}
	${UPNPFRAMEWORK_LIBRARIES}
)

ADD_TEST(UPnPTests upnptest)
 
