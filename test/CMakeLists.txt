CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

ENABLE_TESTING()

SET(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR})

FIND_PACKAGE(PkgConfig)
FIND_PACKAGE(GTest REQUIRED)
FIND_PACKAGE(GMock REQUIRED)

INCLUDE_DIRECTORIES(
	${GMOCK_INCLUDE_DIRS}
	${GTEST_INCLUDE_DIRS}	
	${CMAKE_CURRENT_SOURCE_DIR}/../inc/
)

ADD_EXECUTABLE(upnptest
	devicediscover.h
	main.cpp
    xmlutilstest.cpp
	#mediarenderertest.cpp
	#mediaservertest.cpp
	#controlpointtest.cpp
	testenvironment.h
)

SET (CMAKE_CXX_FLAGS "-std=c++11")

LINK_DIRECTORIES(
    ${UPNPFRAMEWORK_LIBRARY_DIRS}
)

TARGET_LINK_LIBRARIES(upnptest
	-lpthread
	${GMOCK_LIBRARIES}
	${GTEST_BOTH_LIBRARIES}
	${UPNPFRAMEWORK_LIBRARIES}
)

ADD_TEST(UPnPTests upnptest)
 
